import numpy as np
from geopy.distance import geodesic


def calculate_distance(A, B):
    return 6371 * 10 ** 3 * np.arccos(np.cos(A[1]) * np.cos(B[1]) * np.cos(B[0] - A[0]) + A[1] * B[1])


KFC_lat_log = [['108.937847', '34.132887'], ['108.868828', '34.199134'], ['109.015041', '34.211159'],
               ['108.944062', '34.352765'],
               ['108.919294', '34.180144'], ['108.892008', '34.283387'], ['108.871430', '34.261104'],
               ['108.961922', '34.276979'],
               ['108.909284', '34.247895'], ['108.955792', '34.211985'], ['108.846932', '34.238143'],
               ['108.939899', '34.358630'],
               ['108.963657', '34.268000'], ['108.943989', '34.260542'], ['108.981368', '34.269157'],
               ['108.950599', '34.198392'],
               ['108.902604', '34.236490'], ['108.825070', '34.253920'], ['108.972604', '34.287695'],
               ['108.965999', '34.351895']]
MC_lat_log = [['108.946641', '34.261887'], ['108.936903', '34.229282'], ['108.881699', '34.194321'],
              ['108.996278', '34.302895'],
              ['108.893550', '34.219525'], ['109.056958', '34.273964'], ['108.912227', '34.157825'],
              ['108.983815', '34.268932'],
              ['108.892709', '34.236872'], ['108.948727', '34.259112'], ['108.929258', '34.197846'],
              ['108.964078', '34.212422'],
              ['108.963703', '34.341407'], ['108.956981', '34.172927'], ['108.873426', '34.237753'],
              ['108.868778', '34.170026'],
              ['108.988853', '34.203912'], ['108.839449', '34.210518'], ['108.938550', '34.217573'],
              ['108.963224', '34.235112']]
ordinary_lat_log = [['109.044480', '34.343991'], ['109.072264', '34.279830'], ['108.937572', '34.342601'],
                    ['108.992365', '34.216228'], ['108.972944', '34.212982'], ['108.947300', '34.257908'],
                    ['108.898460', '34.280834'], ['108.937288', '34.342642'], ['108.974174', '34.269576'],
                    ['108.881477', '34.245412'], ['108.919671', '34.286006'], ['108.946789', '34.315457'],
                    ['108.909587', '34.247317'], ['108.932731', '34.156164'], ['108.946330', '34.242104'],
                    ['108.948834', '34.330365'], ['108.954630', '34.241640'], ['108.964571', '34.247390'],
                    ['109.233848', '34.665397'], ['108.995060', '34.278243']]
for i in range(len(KFC_lat_log)):
    for j in range(2):
        KFC_lat_log[i][j] = float(KFC_lat_log[i][j])
for i in range(len(MC_lat_log)):
    for j in range(2):
        MC_lat_log[i][j] = float(MC_lat_log[i][j])
for i in range(len(ordinary_lat_log)):
    for j in range(2):
        ordinary_lat_log[i][j] = float(ordinary_lat_log[i][j])

KFC_lat_log = np.array(KFC_lat_log)
MC_lat_log = np.array(MC_lat_log)
ordinary_lat_log = np.array(ordinary_lat_log)
KFC_nearBy = [[] for _ in range(len(KFC_lat_log))]
cnt = 0
for i in range(len(KFC_lat_log)):
    found = False
    for j in range(len(ordinary_lat_log)):
        distance = geodesic((KFC_lat_log[i][1], KFC_lat_log[i][0]), (ordinary_lat_log[j][1], ordinary_lat_log[j][0]))
        if distance < 2:
            KFC_nearBy[i].append(ordinary_lat_log[j])
            found = True
    if found: cnt += 1
print(KFC_nearBy)
print("在{}家KFC中，有{}家KFC周围2.5km有Mcdonald".format(len(KFC_lat_log), cnt))
print(len(ordinary_lat_log))
print(len(MC_lat_log))
